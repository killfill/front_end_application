<html>
	
	<head>

		<link rel="stylesheet" href='../layout.css' />
		<link rel="stylesheet" href='../boxen.css' />
	
		<script src='//cdnjs.cloudflare.com/ajax/libs/react/0.10.0/JSXTransformer.js'></script>
		<script src='//cdnjs.cloudflare.com/ajax/libs/react/0.10.0/react.min.js'></script>

		<style>
			table.large-table {
				width: 100%;
				border-spacing: 0px;
			}
			table.large-table tr th {
				font-weight: normal;
				text-transform: uppercase;
				cursor: pointer;
				border-bottom: 1px black solid;
			}
			table.large-table tr:hover td {
				background-color: #C0C2C1;
				color: white;
			}
			.muted {
				color: gray;
			}
			.center {
				text-align: center;
			}
			.strong {
				font-weight: bold;
			}
		</style>

		<script type="text/jsx">
			/** @jsx React.DOM */

var n = 0
function buildSample(symbol) {
	symbol = symbol || 'SPL' + (n++)

	return {
	    "Name": symbol + ' Company Inc.',
	    "Symbol": symbol,
	    "LastPrice": (400 + 200 * Math.random()).toFixed(2),
	    "Change": (-20 + 40 * Math.random()).toFixed(2),
	    "ChangePercent": -10 + 20 * Math.random(),
	    "Timestamp": new Date().toString(),
	    "MSDate": 41570.568969907,
	    "MarketCap":476497591530,
	    "Volume":397562,
	    "ChangeYTD": (400 + 200 * Math.random()).toFixed(2),
	    "ChangePercentYTD": -5 + 10 * Math.random(),
	    "High": (400 + 200 * Math.random()).toFixed(2),
	    "Low": (400 + 200 * Math.random()).toFixed(2),
	    "Open": (400 + 200 * Math.random()).toFixed(2)
	}
}
		var Table = React.createClass({
			getDefaultProps: function() {
				return {
					data: [],
					columns: [],
				}
			},
			buildHeader: function() {
				var ths = this.props.columns.map(function(col) {
					return <th>{col.title ||Â col.getter}</th>
				}.bind(this))

				return <tr>{ths}</tr>
			},
			buildBody: function() {
				return this.props.data.map(function(row) {

					var cells = this.props.columns.map(function(col) {

						var value = typeof(col.getter) === 'function'
							? col.getter(row) //gett is a function, executed it to get the value of the cell
							: row[col.getter] //the key of the hash

						var cls = typeof(col.cls) === 'function'
							? col.cls(row)
							: col.cls

						return <td className={cls}>{value}</td>
					})

					return <tr>{cells}</tr>

				}.bind(this))

			},
			render: function() {
				var header = this.buildHeader(),
					body = this.buildBody()

				return <table className={this.props.className}><tbody>{header}{body}</tbody></table>
			}
		})

		var tableData = [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20].map(function() {
			return buildSample()
		})
		var columsConfig = [
			{getter: 'Symbol', cls: 'center'},
			{getter: 'LastPrice', title: 'Price', cls: 'number strong'},
			{title: 'Change', 
				getter: function(d) { return d.Change + ' (' + d.ChangePercent.toFixed(2) + '%)'}, 
				sort:   function(d) { return d.Change},
				cls:    function(d) { return d.ChangePercent > 0? 'center number positive': 'center number negative'}
			},
			{getter: 'High', cls: 'number'},
			{getter: 'Low', cls: 'number'},
			{getter: 'Open', cls: 'number'},
			{getter: 'ChangeYTD', title: 'Year', cls: 'number'},
			{getter: 'MarketCap', title: 'Market', cls: 'number muted'}
		]

		React.renderComponent(<Table data={tableData} columns={columsConfig} className='large-table hover' />, document.getElementsByClassName('middle')[0])

		</script>

	</head>
	<body>
		
		<section class="topbar">
			<span class="project">&#8669; Stocks</span>
			<ul class='horizontal hover'>
				<li> <a href="boxen.html">Dashboard</a> </li>
				<li class='selected'> <a href="table.html">Table</a> </li>
				<li> <a href="">Graph</a> </li>
				<li> <a href="">Benchmark</a> </li>
				<li> <a href="">@</a> </li>
			</ul>
		</section>

		<section class="sidebar"></section>

		<section class="middle"></section>

	</body>

</html>